---
# tasks file for slurm
- name: Include common tasks
  ansible.builtin.include_tasks: cleanall.yml
  when: _clean_before_install

- name: Validate inventory
  ansible.builtin.include_tasks: validation.yml
  run_once: true

- name: Include common tasks
  ansible.builtin.include_tasks: common.yml

- name: Include controller installation tasks
  ansible.builtin.include_tasks: controller.yml
  when: '"slurm_control_node" in group_names'

- name: Include compute installation tasks
  ansible.builtin.include_tasks: compute.yml
  when: '"slurm_node" in group_names'

# - name: Include DB installation tasks
#   ansible.builtin.include_tasks: dbd.yml
#   when: '"slurm_dbd" in group_names'

- name: Include login node installation tasks
  ansible.builtin.include_tasks: login.yml
  when: '"login" in group_names'

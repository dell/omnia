{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "provision_password": {
      "type": "string",
      "minLength": 8,
      "pattern": "^[^-,\\'\"]+$",
      "description": "Password required during OS provisioning for root users. Length must be at least 8 characters and must not contain commas, hyphens, single quotes, or double quotes."
    },
    "postgresdb_password": {
      "type": "string",
      "minLength": 8,
      "pattern": "^[a-zA-Z0-9]+$",
      "description": "Password required for PostgreSQL database. Length must be at least 8 characters and must contain only alphanumeric characters (letters and numbers)."
    },
    "bmc_username": {
      "type": "string",
      "description": "Username for BMC (idrac) access. The same credentials must be used across all servers."
    },
    "bmc_password": {
      "type": "string",
      "minLength": 3,
      "pattern": "^$|^(?!.*[-\\\\'\"].{3,}$",
      "description": "Password required for BMC (idrac) access. Length must be at least 3 characters and must not contain commas, hyphens, single quotes, or double quotes."
    },
    "switch_snmp3_username": {
      "type": "string",
      "description": "Non-admin SNMPv3 credentials for the PXE switch. If multiple switches are provided, use the same credentials for all switches."
    },
    "switch_snmp3_password": {
      "type": "string",
      "pattern": "^[^-,\\'\"]*$",
      "description": "Password required for SNMPv3 access to the PXE switch. Must not contain commas, hyphens, single quotes, or double quotes."
    },
    "docker_username": {
      "type": "string",
      "description": "Username for Dockerhub account. This will be used for Docker login."
    },
    "docker_password": {
      "type": "string",
      "description": "Password for Dockerhub account. Must not contain commas, hyphens, single quotes, or double quotes."
    }
  },
  "required": [
    "provision_password",
    "postgresdb_password"
  ],
  "if": {
    "properties": {
      "docker_username": { "type": "string", "minLength": 1 }
    }
  },
  "then": {
    "properties": {
      "docker_password": {
        "type": "string",
        "minLength": 1,
        "description": "Password for Dockerhub account. Must not be empty and must not contain commas, hyphens, single quotes, or double quotes."
      }
    },
    "required": ["docker_password"]
  },
  "else": {
    "properties": {
      "docker_password": {
        "type": "string",
        "description": "Password for Dockerhub account. Must not contain commas, hyphens, single quotes, or double quotes."
      }
    }
  }
}

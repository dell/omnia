Mapping Files
--------------
Manually collect PXE NIC information for target servers and manually define them to Omnia using a mapping file using the below format:

**pxe_mapping_file.csv**


::

    MAC,Hostname,IP

    xx:yy:zz:aa:bb:cc,server,10.5.0.101

    aa:bb:cc:dd:ee:ff,server2, 10.5.0.102

The following parameters need to be populated in ``input/provision_config.yml`` to discover target nodes using a mapping file.

+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Variable               | Default, Choices                                | Required/Optional | Description                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| network_interface_type | **lom**, dedicated                              | Required          | The network type used on the Omnia cluster.                                                                                                                                                                                                                                                                                                                                                                                                              |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| discovery_mechanism    | **switch_based**, mapping, bmc, snmpwalk        | Required          | The mechanism through which Omnia will discover nodes for provisioning.   For more information on how the mechanisms work, go to `DiscoveryMechanisms   <DiscoveryMechanisms/index>`_.                                                                                                                                                                                                                                                                   |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| provision_os           | **rhel**, rocky                                 | Required          | The operating system to be provisioned on target nodes in the   cluster.                                                                                                                                                                                                                                                                                                                                                                                 |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| provision_os_version   | 8.0, 8.1, 8.2, 8.3, 8.4, 8.5, **8.6**, 8.7      | Required          | OS version of provision_os to be installed.                                                                                                                                                                                                                                                                                                                                                                                                              |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| iso_file_path          | "/home/RHEL-8.6.0-20220420.3-x86_64-dvd1.iso"   | Required          | Path where user has placed the iso image that needs to be   provisioned on target nodes. Accepted files are Rocky8-DVD or RHEL-8.x-DVD   (full OS). ``iso_file_path`` should contain the ``provision_os`` and   ``provision_os_version`` values in filename.                                                                                                                                                                                             |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| timezone               | **GMT**,  EST, CET, MST, CST6CDT,   PST8PDT     | Required          | Timezone to be used during OS provisioning. Available timezones are   provided in ``provision/roles/provision_validation/files/timezone.txt``.                                                                                                                                                                                                                                                                                                           |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| language               | **en-US**                                       | Required          | Language to be used during OS provisioning.                                                                                                                                                                                                                                                                                                                                                                                                              |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| default_lease_time     | **86400** [21600-86400]                         | Required          | Default lease time for IPs assigned by DHCP                                                                                                                                                                                                                                                                                                                                                                                                              |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| provision_password     |                                                 | Required          | * Password set for the root account of target nodes during   provisioning.                                                                                                                                                                                                                                                                                                                                                                               |
|                        |                                                 |                   | * Length >= 8 characters                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                        |                                                 |                   | * Password must not contain -,\, ',"                                                                                                                                                                                                                                                                                                                                                                                                                     |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| postgresdb_password    |                                                 | Required          | * Password set for the postgresDB on target nodes during   provisioning.                                                                                                                                                                                                                                                                                                                                                                                 |
|                        |                                                 |                   | * Length >= 8 characters                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                        |                                                 |                   | * Password must not contain -,\, ',"                                                                                                                                                                                                                                                                                                                                                                                                                     |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| node_name              | node                                            | Required          | * Prefix for target node names, if dynamically allocated.                                                                                                                                                                                                                                                                                                                                                                                                |
|                        |                                                 |                   | * Hostname = node_name + '0000x' + domain_name                                                                                                                                                                                                                                                                                                                                                                                                           |
|                        |                                                 |                   | * Hostname <= 65 characters                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                        |                                                 |                   | * Example: servernode00001.Omnia.test , where ``node_name``=servernode,   ``domain_name``=Omnia.test , 00001 used by Omnia.                                                                                                                                                                                                                                                                                                                              |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| domain_name            |                                                 | Required          | * Domain name the user intends to configure on the cluster.                                                                                                                                                                                                                                                                                                                                                                                              |
|                        |                                                 |                   | * Hostname = node_name + '0000x' + domain_name                                                                                                                                                                                                                                                                                                                                                                                                           |
|                        |                                                 |                   | * Hostname <= 65 characters                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                        |                                                 |                   | * Please provide a valid domain name according to the domain name   standards.                                                                                                                                                                                                                                                                                                                                                                           |
|                        |                                                 |                   | * Example: servernode00001.Omnia.test , where ``node_name``=servernode,   ``domain_name``=Omnia.test , 00001 used by Omnia.                                                                                                                                                                                                                                                                                                                              |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| public_nic             | eno2                                            | Required          | The nic/ethernet card that is connected to the public internet.                                                                                                                                                                                                                                                                                                                                                                                          |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| admin_nic              | eno1                                            | Required          | Admin NIC of Control Plane. This is the shared LOM NIC.                                                                                                                                                                                                                                                                                                                                                                                                  |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| admin_nic_subnet *     | 10.5.0.0                                        | Required          | The subnet within which all Admin IPs are assigned.                                                                                                                                                                                                                                                                                                                                                                                                      |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| pxe_mapping_file_path                                                    | Optional          | The path where the mapping file resides. The mapping file consists of the   MAC address and its respective IP address and hostname. If static IPs are   required, create a csv file in the format MAC,Hostname,IP. A sample file is   provided here: examples/pxe_mapping_file.csv.                                                                                                                                                                      |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ib_nic_subnet *        |                                                 | Optional          | If provided, Omnia will handle and assign static IPs to compute node's IB   network.  If provided the db entry will   be in parallel with the ``pxe_subnet``. Example: If admin_ip: 10.5.0.50 and   ib_nic_subnet: 10.10.0.0, then ib_ip: 10.10.0.50. __Note:__ Ensure that IB   NICs have ib as a prefix.                                                                                                                                               |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| primary_dns            |                                                 | optional          | The primary DNS host IP queried to provide Internet access to Compute   Node (through DHCP routing)                                                                                                                                                                                                                                                                                                                                                      |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| secondary_dns          |                                                 | optional          | The secondary DNS host IP queried to provide Internet access to Compute   Node (through DHCP routing)                                                                                                                                                                                                                                                                                                                                                    |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| disk_partition         |   - { mount_point: "",   desired_capacity: "" } | optional          | User defined disk partition applied to remote servers. The disk partition   desired_capacity has to be provided in MB. Valid mount_point values accepted   for disk partition are /home, /var, /tmp, /usr, swap. Default partition size   provided for /boot is 1024MB, /boot/efi is 256MB and the remaining space to /   partition.  Values are accepted in the   form of JSON list such as: , - { mount_point: "/home",   desired_capacity: "102400" } |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| mlnx_ofed_path         |                                                 | optional          | Absolute path to a  local copy of   the .iso file containing Mellanox OFED packages. The image can be downloaded   from https://network.nvidia.com/products/infiniband-drivers/linux/mlnx_ofed/.  Sample value:   ``/root/MLNX_OFED_LINUX-5.8-1.1.2.1-rhel8.6-x86_64.iso``                                                                                                                                                                               |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| cuda_toolkit_path      |                                                 | optional          | Absolute path to local copy of .rpm file containing CUDA packages. The   cuda rpm can be downloaded from https://developer.nvidia.com/cuda-downloads.   CUDA will be installed post provisioning without any user intervention. Eg:   cuda_toolkit_path: "/root/cuda-repo-rhel8-12-0-local-12.0.0_525.60.13-1.x86_64.rpm"                                                                                                                                |
+------------------------+-------------------------------------------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. warning:: The IP address *192.168.25.x* is used for PowerVault Storage communications. Therefore, do not use this IP address for other configurations.


To continue to the next steps:

* `Provisioning the cluster <../installprovisiontool.html>`_
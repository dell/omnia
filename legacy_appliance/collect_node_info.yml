# Copyright 2022 Dell Inc. or its subsidiaries. All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
---

- name: Collect control_plane host inventory
  hosts: localhost
  connection: local
  gather_facts: false
  roles:
    - collect_node_info

- import_playbook: "{{ playbook_dir }}/roles/collect_node_info/files/create_inventory.yml"
  vars:
    host_username: "{{ hostvars['127.0.0.1']['host_username'] }}"
    host_password: "{{ hostvars['127.0.0.1']['provision_password'] }}"
    mapping_file: "{{ hostvars['127.0.0.1']['mapping_file'] | bool }}"
    ethernet_switch_username: "{{ hostvars['127.0.0.1']['ethernet_switch_username'] }}"
    ethernet_switch_password: "{{ hostvars['127.0.0.1']['ethernet_switch_password'] }}"
    ib_username: "{{ hostvars['127.0.0.1']['ib_username'] }}"
    ib_password: "{{ hostvars['127.0.0.1']['ib_password'] }}"
    powervault_username: "{{ hostvars['127.0.0.1']['powervault_username'] }}"
    powervault_password: "{{ hostvars['127.0.0.1']['powervault_password'] }}"
